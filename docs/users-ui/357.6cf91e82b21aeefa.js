"use strict";(self.webpackChunkusers_ui=self.webpackChunkusers_ui||[]).push([[357],{9357:(te,m,l)=>{l.r(m),l.d(m,{UsersModule:()=>se});var p=l(1048),n=l(4406),h=l(4462),s=l(9724),a=(()=>{return(e=a||(a={})).LOAD_USERS="[Users] Load Users",e.LOAD_USERS_SUCCESS="[Users] Load Users Success",e.LOAD_USERS_FAILURE="[Users] Load Users Failure",e.ADD_USER="[Users] Add User",e.ADD_USER_SUCCESS="[Users] Add User Success",e.ADD_USER_FAILURE="[Users] Add User Failure",e.DELETE_USER="[Users] Delete User",e.DELETE_USER_SUCCESS="[Users] Delete User Success",e.DELETE_USER_FAILURE="[Users] Delete User Failure",e.DELETE_USERS="[Users] Delete Users",e.DELETE_USERS_SUCCESS="[Users] Delete Users Success",e.DELETE_USERS_FAILURE="[Users] Delete Users Failure",e.EDIT_USER="[Users] Edit User",e.EDIT_USERS="[Users] Edit Users",e.UPDATE_USER="[Users] Update User",e.UPDATE_USER_SUCCESS="[Users] Update User Success",e.UPDATE_USER_FAILURE="[Users] Update User Failure",a;var e})();const f=(0,n.PH)(a.LOAD_USERS),C=(0,n.PH)(a.LOAD_USERS_SUCCESS,(0,n.Ky)()),b=(0,n.PH)(a.LOAD_USERS_FAILURE,(0,n.Ky)()),S=(0,n.PH)(a.ADD_USER,(0,n.Ky)()),L=(0,n.PH)(a.ADD_USER_SUCCESS,(0,n.Ky)()),O=(0,n.PH)(a.ADD_USER_FAILURE,(0,n.Ky)()),D=(0,n.PH)(a.EDIT_USER,(0,n.Ky)()),R=(0,n.PH)(a.EDIT_USERS),v=(0,n.PH)(a.UPDATE_USER,(0,n.Ky)()),A=(0,n.PH)(a.UPDATE_USER_SUCCESS,(0,n.Ky)()),j=(0,n.PH)(a.UPDATE_USER_FAILURE,(0,n.Ky)()),P=(0,n.PH)(a.DELETE_USER,(0,n.Ky)()),F=(0,n.PH)(a.DELETE_USER_SUCCESS,(0,n.Ky)()),y=(0,n.PH)(a.DELETE_USER_FAILURE,(0,n.Ky)()),T=(0,n.PH)(a.DELETE_USERS),x=(0,n.PH)(a.DELETE_USERS_SUCCESS),H=(0,n.PH)(a.DELETE_USERS_FAILURE,(0,n.Ky)());let M=(()=>{class e{constructor(t){this.store=t}addUser(t){const o={name:t,isEditing:!1,id:Math.random().toString(16)};this.store.dispatch(S({user:o}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.yh))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-header"]],decls:8,vars:0,consts:[[1,"Header"],[1,"form-group"],["for","newUser",1,"form-label"],["id","newUser",1,"form-control",3,"keyup.enter"],["newUser",""],[1,"btn",3,"click"]],template:function(t,o){if(1&t){const i=s.EpF();s.TgZ(0,"header",0)(1,"div",1)(2,"label",2),s._uU(3,"Add New User"),s.qZA(),s.TgZ(4,"input",3,4),s.NdJ("keyup.enter",function(){s.CHM(i);const E=s.MAs(5);return o.addUser(E.value),E.value=""}),s.qZA()(),s.TgZ(6,"button",5),s.NdJ("click",function(){s.CHM(i);const E=s.MAs(5);return o.addUser(E.value),E.value=""}),s._uU(7,"Add"),s.qZA()()}},styles:[".Header[_ngcontent-%COMP%]{display:flex;flex:1;background:white;padding:1rem;margin-bottom:1rem;border:1px solid #dddddd;border-radius:4px}"]}),e})();var u=l(7969);const I=(0,n.ZF)("users"),k=(0,n.P1)(I,e=>e.list);function w(e,r){if(1&e){const t=s.EpF();s.ynx(0),s.TgZ(1,"input",3),s.NdJ("change",function(i){return s.CHM(t),s.oxw().onUserChange(i)})("keyup.enter",function(){s.CHM(t);const i=s.oxw();return i.onSave(i.userProps)}),s.qZA(),s.TgZ(2,"div",4)(3,"button",5),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return i.onSave(i.userProps)}),s._uU(4,"Save"),s.qZA()(),s.BQk()}if(2&e){const t=s.oxw();s.xp6(1),s.Q6J("value",t.userProps.name)}}function K(e,r){if(1&e){const t=s.EpF();s.TgZ(0,"div",6),s._uU(1),s.qZA(),s.TgZ(2,"div",4)(3,"button",5),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return i.onEdit(i.userProps.id)}),s._uU(4,"Edit"),s.qZA(),s.TgZ(5,"button",5),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return i.onDelete(i.userProps.id)}),s._uU(6,"Delete"),s.qZA()()}if(2&e){const t=s.oxw();s.xp6(1),s.Oqu(t.userProps.name)}}let J=(()=>{class e{constructor(t){this.store=t,this.name=""}onUserChange(t){this.name=t.target.value}onSave(t){const o=this.name?this.name:t.name,i=Object.assign(Object.assign({},t),{name:o,isEditing:!1});this.store.dispatch(v({user:i}))}onEdit(t){this.store.dispatch(D({userId:t}))}onDelete(t){this.store.dispatch(P({userId:t}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.yh))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-user"]],inputs:{userProps:["user","userProps"]},decls:4,vars:2,consts:[[1,"UserList"],[4,"ngIf","ngIfElse"],["noEditing",""],["type","text","autofocus","",1,"form-control",3,"value","change","keyup.enter"],[1,"UserList__right-col"],[1,"btn",3,"click"],[1,"UserList__left-col"]],template:function(t,o){if(1&t&&(s.TgZ(0,"li",0),s.YNc(1,w,5,1,"ng-container",1),s.YNc(2,K,7,1,"ng-template",null,2,s.W1O),s.qZA()),2&t){const i=s.MAs(3);s.xp6(1),s.Q6J("ngIf",o.userProps.isEditing)("ngIfElse",i)}},directives:[p.O5],styles:[".UserList[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;border-top:1px solid #dddddd}.UserList__right-col[_ngcontent-%COMP%], .UserList__left-col[_ngcontent-%COMP%]{align-self:center}"]}),e})();function $(e,r){1&e&&s._UZ(0,"app-user",6),2&e&&s.Q6J("user",r.$implicit)}const N=function(e){return{hidden:e}};let G=(()=>{class e{constructor(t){this.store=t,this.usersLength=0,this.userList$=this.store.pipe((0,n.Ys)(k))}ngOnInit(){this.noUsers$=this.userList$.pipe((0,u.U)(t=>0===t.length)),this.store.dispatch(f())}editAll(){this.store.dispatch(R())}deleteAll(){this.store.dispatch(T())}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.yh))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-user-list"]],decls:10,vars:8,consts:[[1,"UserList",3,"ngClass"],[1,"UserList__header"],[1,"btn","btn--align-left",3,"click"],[1,"btn",3,"click"],[1,"UserList__list"],[3,"user",4,"ngFor","ngForOf"],[3,"user"]],template:function(t,o){1&t&&(s.TgZ(0,"section",0),s.ALo(1,"async"),s.TgZ(2,"div",1)(3,"button",2),s.NdJ("click",function(){return o.editAll()}),s._uU(4,"Edit All"),s.qZA(),s.TgZ(5,"button",3),s.NdJ("click",function(){return o.deleteAll()}),s._uU(6,"Delete All"),s.qZA()(),s.TgZ(7,"ul",4),s.YNc(8,$,1,1,"app-user",5),s.ALo(9,"async"),s.qZA()()),2&t&&(s.Q6J("ngClass",s.VKq(6,N,s.lcZ(1,2,o.noUsers$))),s.xp6(8),s.Q6J("ngForOf",s.lcZ(9,4,o.userList$)))},directives:[p.mk,p.sg,J],pipes:[p.Ov],styles:[".UserList[_ngcontent-%COMP%]{background:white;margin:0}.UserList__header[_ngcontent-%COMP%]{padding:16px}.UserList__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0}.hidden[_ngcontent-%COMP%]{display:none}"]}),e})();const Y=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-users"]],decls:2,vars:0,template:function(t,o){1&t&&s._UZ(0,"app-header")(1,"app-user-list")},directives:[M,G],styles:[""]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[h.Bz.forChild(Y)],h.Bz]}),e})();var U=l(4945);const Q_data=[{name:"Sam Tin Wong",isEditing:!1,id:"0.2b9f2ba48187b"},{name:"Bill Job",isEditing:!1,id:"0.7bd659998f6e1"},{name:"Harry James",isEditing:!1,id:"0.4bbc2437eafc6"},{name:"Res Berry",isEditing:!1,id:"0.1d890a5bc6dfa"},{name:"John Dow",isEditing:!1,id:"0.839529ab4059b"}];var W=l(9725);let Z=(()=>{class e{constructor(t,o){this.store=t,this.http=o,this.loadedUsers=Q_data}getAll(){return(0,U.of)(this.loadedUsers)}addUser(t){return(0,U.of)(t)}updateUser(t){return(0,U.of)(t)}deleteUsers(){return(0,U.of)([])}deleteUser(t){return(0,U.of)(t)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.yh),s.LFG(W.eN))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const X=(0,n.Lq)({list:[],loading:!1},(0,n.on)(f,e=>Object.assign(Object.assign({},e),{loading:!0})),(0,n.on)(C,(e,r)=>Object.assign(Object.assign({},e),{list:r.list,loading:!1})),(0,n.on)(b,e=>Object.assign(Object.assign({},e),{loading:!1})),(0,n.on)(S,e=>Object.assign(Object.assign({},e),{loading:!0})),(0,n.on)(L,(e,r)=>Object.assign(Object.assign({},e),{list:[...e.list,r.user],loading:!1})),(0,n.on)(O,(e,r)=>Object.assign(Object.assign({},e),{loading:!1,error:r.error})),(0,n.on)(D,(e,r)=>{const t=[...e.list].map(o=>o.id===r.userId?Object.assign(Object.assign({},o),{isEditing:!0}):o);return Object.assign(Object.assign({},e),{list:t})}),(0,n.on)(R,e=>{const r=[...e.list].map(t=>Object.assign(Object.assign({},t),{isEditing:!0}));return Object.assign(Object.assign({},e),{list:r})}),(0,n.on)(v,e=>Object.assign(Object.assign({},e),{loading:!0})),(0,n.on)(A,(e,r)=>{const t=[...e.list].map(o=>o.id===r.user.id?Object.assign(Object.assign({},o),{name:r.user.name,isEditing:!1}):o);return Object.assign(Object.assign({},e),{list:t,loading:!1})}),(0,n.on)(j,(e,r)=>Object.assign(Object.assign({},e),{loading:!1,error:r.error})),(0,n.on)(P,e=>Object.assign(Object.assign({},e),{loading:!0})),(0,n.on)(F,(e,r)=>{const t=[...e.list].findIndex(i=>i.id===r.userId),o=[...e.list.slice(0,t),...e.list.slice(t+1)];return Object.assign(Object.assign({},e),{list:o,loading:!1})}),(0,n.on)(y,(e,r)=>Object.assign(Object.assign({},e),{loading:!1,error:r.error})),(0,n.on)(T,e=>Object.assign(Object.assign({},e),{loading:!0})),(0,n.on)(x,e=>Object.assign(Object.assign({},e),{list:[],loading:!1})),(0,n.on)(H,(e,r)=>Object.assign(Object.assign({},e),{loading:!1,error:r.error})));function q(e,r){return X(e,r)}var d=l(4381),V=l(6492),g=l(3568),_=l(1528);let ee=(()=>{class e{constructor(t,o){this.actions$=t,this.usersService=o,this.loadUsers$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(f),(0,V.z)(()=>this.usersService.getAll()),(0,u.U)(i=>C({list:i})),(0,g.K)(i=>(0,U.of)(b({error:i}))))),this.addUser$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(S),(0,_.w)(({user:i})=>this.usersService.addUser(i).pipe((0,u.U)(c=>L({user:c})),(0,g.K)(c=>(0,U.of)(O({error:c}))))))),this.updateUser$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(a.UPDATE_USER),(0,_.w)(({user:i})=>this.usersService.updateUser(i).pipe((0,u.U)(c=>A({user:c})),(0,g.K)(c=>(0,U.of)(j({error:c}))))))),this.deleteUser$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(a.DELETE_USER),(0,_.w)(({userId:i})=>this.usersService.deleteUser(i).pipe((0,u.U)(c=>F({userId:c})),(0,g.K)(c=>(0,U.of)(y({error:c}))))))),this.deleteUsers$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(a.DELETE_USERS),(0,_.w)(()=>this.usersService.deleteUsers().pipe((0,u.U)(()=>x()),(0,g.K)(i=>(0,U.of)(H({error:i})))))))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(d.eX),s.LFG(Z))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[Z,n.yh],imports:[[p.ez,B,n.Aw.forFeature("users",q),d.sQ.forFeature([ee])]]}),e})()}}]);